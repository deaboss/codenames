<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Random 5x5 Color Grid</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            padding-top: 20px;
            background-color: white;
            color: black;
            transition: background-color 0.3s, color 0.3s;
        }

        .dark-mode {
            background-color: black;
            color: white;
        }

        .controls {
            transition: opacity 0.5s;
        }

        .controls.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(5, 65px);
            grid-template-rows: repeat(5, 65px);
            gap: 14px;
            margin: 20px auto;
            padding: 4px;
            border-radius: 12px;
            width: max-content;
        }

        .cell {
            width: 65px;
            height: 65px;
            border-radius: 10px;
            animation: popIn 0.5s ease-out;
            transform-origin: center;
        }

        @keyframes popIn {
            0% {
                transform: scale(0.2);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 20px;
            border: none;
            background-color: #666666;
            color: white;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #444444;
        }

        .dark-mode button {
            background-color: #555;
            color: white;
        }

        .dark-mode button:hover {
            background-color: #777;
        }

        label.switch {
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            font-size: 16px;
        }

        .switch input {
            display: none;
        }

        .slider {
            width: 40px;
            height: 20px;
            background-color: #2C5ABD;
            border-radius: 20px;
            margin: 0 10px;
            position: relative;
            transition: background-color 0.3s;
        }

        .slider::before {
            content: "";
            width: 18px;
            height: 18px;
            background-color: white;
            border-radius: 50%;
            position: absolute;
            top: 1px;
            left: 1px;
            transition: transform 0.3s;
        }

        input:checked + .slider {
            background-color: #F02D2D;
        }

        input:checked + .slider::before {
            transform: translateX(20px);
        }
    </style>
</head>
<body>

<div class="controls" id="uiControls">
    <button onclick="generateGrid()">⇄</button>
    <label class="switch">
        <input type="checkbox" id="colorToggle" onchange="generateGrid()">
        <span class="slider"></span>
    </label>
    <button id="darkModeBtn" onclick="toggleDarkMode()">☾</button>
</div>

<div class="grid" id="colorGrid"></div>

<script>
    const grid = document.getElementById('colorGrid');
    const uiControls = document.getElementById('uiControls');
    const colorToggle = document.getElementById('colorToggle');
    let hideTimeout;

    const colorMap = {
        blue: '#2C5ABD',
        red: '#F02D2D',
        black: '#474747',
        tan: '#FFE4A4'
    };

    function generateGrid() {
        grid.innerHTML = '';

        const isRedMajority = colorToggle.checked;
        const colorCounts = {
            blue: isRedMajority ? 8 : 9,
            red: isRedMajority ? 9 : 8,
            black: 1,
            tan: 7
        };

        // Create shuffled color array
        let colorArray = [];
        for (let color in colorCounts) {
            for (let i = 0; i < colorCounts[color]; i++) {
                colorArray.push(colorMap[color]);
            }
        }
        for (let i = colorArray.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [colorArray[i], colorArray[j]] = [colorArray[j], colorArray[i]];
        }

        // Create grid cells
        for (let i = 0; i < 25; i++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.style.backgroundColor = colorArray[i];
            grid.appendChild(cell);
        }
    }

    // Dark mode toggle
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        const darkModeBtn = document.getElementById('darkModeBtn');
        const isDark = document.body.classList.contains('dark-mode');
        darkModeBtn.textContent = isDark ? '☼' : '☾';
    }

    // Show/hide UI controls
    function showControls() {
        uiControls.classList.remove('hidden');
        clearTimeout(hideTimeout);
        hideTimeout = setTimeout(() => {
            uiControls.classList.add('hidden');
        }, 2000);
    }

    document.addEventListener('click', showControls);
    document.addEventListener('mousemove', showControls);
    document.addEventListener('keydown', showControls);

    // Initial
    generateGrid();
    showControls();
</script>

</body>
</html>
